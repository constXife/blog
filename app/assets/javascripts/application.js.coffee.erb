#= require jquery
#= require redactor-rails
#= require redactor/fullscreen
#= require redactor-rails/config
#= require jquery.fancybox.pack
#= require_tree .

$.ajaxSetup
  beforeSend: (xhr) ->
    xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))

$(document).ready ->
  if $('div.post').length
    $(window).scroll ->
      if ($(this).scrollTop() > 100)
        $('.scrollup').fadeIn()
      else
        $('.scrollup').fadeOut()

    $('.scrollup').click ->
      $("html, body").animate({ scrollTop: 0 }, 600)
      return false;

    <% if Rails.env.production? %>
    VK.init({apiId: 3771415, onlyWidgets: true})
    VK.Widgets.Comments('vk_comments', {width: 940, limit: 20, autoPublish: 0, attach: '*'})
    <% end %>